<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Customized Bootstrap Stylesheet -->
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
<!-- 로그인, 회원가입 동시 구현 페이지 -->
<p class="tip">SoulMate</p>
<div class="cont">
    <div class="form sign-in">
        <h2>Log in</h2>
        <form>
            <label>
                <span>아이디</span>
                <input type="text" id="username" name="loginId" required autofocus />
            </label>
            <label>
                <span>비밀번호</span>
                <input type="password" id="password" name="password"/>
            </label>
            <p class="forgot-pass">Forgot password?</p>
            <button type="button" class="submit" id="submit" onclick="login()">로그인</button>
        </form>

    </div>
    <div class="sub-cont">
        <div class="img">
            <div class="img__text m--up">
                <h2>방문이 처음이신가요?</h2>
                <p>회원가입 후, 최고의 룸메이트 매칭 찬스를 가져가세요!</p>
            </div>
            <div class="img__text m--in">
                <h2>계정이 있으신가요?</h2>
                <p>이미 계정이 있다면, 로그인 하세요!</p>
            </div>
            <div class="img__btn">
                <span class="m--up">회원가입</span>
                <span class="m--in">로그인</span>
            </div>
        </div>
<!--        회원가입    -->
        <div class="form sign-up">
            <h2>Sign up</h2>
            <label>
                <span>이름</span>
                <input type="text" id="name"/>
            </label>
            <label>
                <span>이메일</span>
                <input type="email" id="email"/>
            </label>
            <label>
                <span>아이디</span>
                <input type="text" id="signupLoginId"/>
            </label>
            <label>
                <span>비밀번호</span>
                <input type="password" id="signupPassword"/>
            </label>
            <label>
                <span>학번</span>
                <input type="text" id="studentNumber" />
            </label>
        <label>
            <span>생년월일</span>
            <input type="date" id="birthDate" name="birthDate" />
        </label>
        <div class="genderSelect" id="gender">
            <span style="margin-top: 15px;">성별</span>
            <br>
            <input type="radio" name="gender" value="MAN" id="man"><label for="man" class="man" style="margin-top: 15px;">남성</label>
            <input type="radio" name="gender" value="WOMAN" id="woman"><label for="woman" class="man" style="margin-top: 15px;">여성</label>
        </div>
        <div class="college-select" id="collage">
            <br>
            <select name="college" id="college-select"
                    class="dropdown-menu" style="margin-top: 15px;" onchange="collegeChange()">
                <option value="공공정책대학" class="dropdown-item">공공정책대학</option>
                <option value="과학기술대학" class="dropdown-item">과학기술대학</option>
                <option value="글로벌비즈니스대학" class="dropdown-item">글로벌비즈니스대학</option>
                <option value="문화스포츠대학" class="dropdown-item">문화스포츠대학</option>
                <option value="스마트도시학부" class="dropdown-item">스마트도시학부</option>
                <option value="약학대학" class="dropdown-item">약학대학</option>
            </select>
        </div>

        <div id="major" style="display: block; width: 100%; margin-top: 5px; padding-bottom: 5px; text-align: center;">
            <br>
            <select id="major-select" class="dropdown-menu">
                <option value="경제정책학전공" class="dropdown-item">경제정책학전공</option>
                <option value="공공사회학전공" class="dropdown-item">공공사회학전공</option>
                <option value="통일외교안보전공" class="dropdown-item">통일외교안보전공</option>
                <option value="빅데이터사이언스학부" class="dropdown-item">빅데이터사이언스학부</option>
                <option value="정부행정학부" class="dropdown-item">정부행정학부</option>
            </select>
        </div>

            <button type="button" id="signupBtn" class="submit">회원가입</button>
        </div>

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="/js/signin_signup.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/js/signup.js"></script>
<script src="/js/select_college_major.js"></script>

<script>
        function login() {
            // Get input values
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;

            // Simple validation
            if (!username) {
                document.getElementById('username-error').innerHTML = 'Please enter your username';
                return;
            }
            if (!password) {
                document.getElementById('password-error').innerHTML = 'Please enter your password';
                return;
            }

            // Prepare data to send
            var data = {
                username: username,
                password: password
            };

            // Send POST request using fetch API
            fetch('/api/member/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                console.log(response);
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(response => {
                // Check resultCode for success
                if (response.resultCode === "SUCCESS") {
                    console.log("sdf");
                    location.href="index.html";
                    window.localStorage.setItem('key',data.resultCode);
                    // Redirect user or perform other actions upon successful login
                } else {
                    // Handle unsuccessful login
                    document.getElementById('login-error').innerHTML = 'Invalid username or password';
                }
            })
            .catch(error => {
                console.error('There was an error with the fetch operation:', error);
            });
        }


</script>

</body>

</html>

